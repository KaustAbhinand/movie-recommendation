  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MovieRecommender — Sign in</title>
    <style>
      :root{
        --bg:#ffffff;
        --page:#brand:#f5c518;
        --muted:#6b7280;
        --accent:#0b4a6f;
        --shadow: 0 10px 30px rgba(15,23,42,0.08);
        font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      }

      html,body{height:100%;margin:0;background:linear-gradient(180deg,#f6fbff 0%, #ffffff 60%);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#0f1724;}
      header{display:flex;align-items:center;justify-content:space-between;padding:18px 32px;background:transparent}
      .brand{display:flex;align-items:center;gap:14px}
      .brand .mark{width:48px;height:30px;background:var(--brand);border-radius:6px;display:inline-flex;align-items:center;justify-content:center;font-weight:800;color:#111;font-size:14px}
      .brand .title{font-weight:800;color:var(--accent);font-size:18px}
      .nav-actions{display:flex;gap:10px;align-items:center}
      .btn{border:0;padding:10px 14px;border-radius:8px;font-weight:700;cursor:pointer}
      .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(15,23,42,0.06)}
      .btn.cta{background:var(--brand);color:#111;box-shadow:0 6px 18px rgba(15,23,42,0.06)}
      .btn.secondary{background:transparent;color:var(--accent);border:1px solid rgba(11,74,111,0.08)}

      .container{display:flex;align-items:stretch;justify-content:center;padding:32px;gap:24px}
      .panel{width:980px;max-width:96%;display:grid;grid-template-columns:1fr 380px;background:transparent;gap:24px}
      .hero{
        background:linear-gradient(180deg,#ffffff,#f4fbff);
        border-radius:12px;padding:40px 44px;box-shadow:var(--shadow);
        display:flex;flex-direction:column;gap:18px;justify-content:center;
      }
      .hero h1{margin:0;font-size:34px;line-height:1.05;color:#07263a}
      .hero p{margin:0;color:var(--muted);font-size:15px;max-width:60ch}
      .features{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
      .feat{display:flex;gap:10px;align-items:flex-start}
      .feat .dot{width:10px;height:10px;background:var(--brand);border-radius:3px;margin-top:6px}
      .feat strong{font-weight:700;color:#0b3f5a;font-size:14px}
      .hero .note{margin-top:8px;color:var(--muted);font-size:13px}

      .signin{
        background:#fff;border-radius:12px;padding:22px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:12px;align-items:stretch;justify-content:center;
      }
      .signin .panel-header{display:flex;flex-direction:column;gap:4px}
      .signin h2{margin:0;font-size:18px;color:#07263a}
      .signin p.lead{margin:0;color:var(--muted);font-size:13px}

      .tabs{display:flex;gap:8px;margin-top:8px}
      .tab{flex:1;padding:8px;border-radius:8px;text-align:center;font-weight:700;cursor:pointer;border:1px solid rgba(7,22,34,0.04);background:transparent;color:var(--accent)}
      .tab.active{background:#f5faff;color:#042635;border-color:transparent;box-shadow:inset 0 -3px 0 rgba(11,74,111,0.03)}

      .form{display:flex;flex-direction:column;gap:10px;margin-top:6px}
      label{font-size:13px;color:#0f1724}
      input[type=text], input[type=password], input[type=email], input[type=number]{
        width:100%;padding:12px;border-radius:8px;border:1px solid #e6eef6;background:#ffffff;font-size:14px;
      }
      .actions-row{display:flex;gap:8px;margin-top:6px}
      .muted{font-size:13px;color:var(--muted)}

      footer{padding:18px;text-align:center;color:var(--muted);font-size:13px}

      @media (max-width:920px){
        .panel{grid-template-columns:1fr}
        .signin{order:2}
        .hero{order:1}
      }
    </style>
  </head>
  <body>
    <header>
      <div class="brand">
        <div class="mark">IMR</div>
        <div>
          <div class="title">InternationalMovieRecommender</div>
          <div style="font-size:12px;color:var(--muted)">Personalized movie suggestions</div>
        </div>
      </div>

      <div class="nav-actions">
        <button class="btn ghost" id="help-btn">Help</button>
        <button class="btn cta" id="btn-signup">Create account</button>
      </div>
    </header>

    <main class="container">
      <section class="panel">
        <div class="hero" aria-labelledby="hero-title">
          <h1 id="hero-title">Find movies you'll actually want to watch</h1>
          <p>Get recommendations tailored to your taste, build watchlists, and save reviews. Fast, private, and made for cinephiles.</p>

          <div class="features" aria-hidden="false">
            <div class="feat"><span class="dot"></span><div><strong>Personalized picks</strong><div class="muted">Recommendations matched to your likes</div></div></div>
            <div class="feat"><span class="dot"></span><div><strong>Save watchlists</strong><div class="muted">Keep track of what to watch next</div></div></div>
            <div class="feat"><span class="dot"></span><div><strong>Ratings & reviews</strong><div class="muted">Record and remember what you watched</div></div></div>
            <div class="feat"><span class="dot"></span><div><strong>Secure & private</strong><div class="muted">Your data stays local in this demo</div></div></div>
          </div>

          
      </div>

        <aside class="signin" aria-labelledby="signin-heading">
          <div class="panel-header">
            <h2 id="signin-heading">Sign in to IMR</h2>
          </div>

          <div class="tabs" role="tablist">
            <div class="tab active" id="tab-login" role="tab" aria-selected="true">Log in</div>
            <div class="tab" id="tab-signup" role="tab" aria-selected="false">Sign up to IMR</div>
          </div>

          <div id="login-form" class="form" role="region" aria-hidden="false">
            <label for="login-username">Username or Email</label>
            <input id="login-username" type="text" placeholder="username or email" autocomplete="username" />

            <label for="login-pass">Password</label>
            <input id="login-pass" type="password" placeholder="password" autocomplete="current-password" />

            <div class="actions-row">
              <button class="btn cta" id="login-submit">Sign in</button>
              <button class="btn ghost" id="forgot-pass" type="button">Forgot?</button>
            </div>

            <div class="muted">Don't have an account? Click <strong>Sign up</strong> above or use the Create account button.</div>
          </div>

          <div id="signup-form" class="form" style="display:none" role="region" aria-hidden="true">
            <label for="name">Full name</label>
            <input id="name" type="text" placeholder="Your full name" />

            <label for="age">Age</label>
            <input id="age" type="number" placeholder="Age" min="10" />

            <label for="email">Email</label>
            <input id="email" type="email" placeholder="you@example.com" autocomplete="email" />

            <label for="username">Username</label>
            <input id="username" type="text" placeholder="choose a username" autocomplete="username" />

            <label for="password">Password</label>
            <input id="password" type="password" placeholder="create a password" autocomplete="new-password" />

            <div class="actions-row">
              <button class="btn cta" id="signup-submit">Create account</button>
              <button class="btn ghost" id="clear-signup">Clear</button>
            </div>

            <div class="muted">Accounts are stored locally for this demo.</div>
          </div>
        </aside>
      </section>
    </main>

    <script>
  const tabLogin = document.getElementById('tab-login');
  const tabSignup = document.getElementById('tab-signup');
  const loginForm = document.getElementById('login-form');
  const signupForm = document.getElementById('signup-form');
  const btnSignup = document.getElementById('btn-signup');

  function showLogin() {
    tabLogin.classList.add('active');
    tabLogin.setAttribute('aria-selected','true');
    tabSignup.classList.remove('active');
    tabSignup.setAttribute('aria-selected','false');
    loginForm.style.display='flex';
    signupForm.style.display='none';
  }
  function showSignup() {
    tabLogin.classList.remove('active');
    tabSignup.classList.add('active');
    loginForm.style.display='none';
    signupForm.style.display='flex';
  }

  tabLogin.addEventListener('click', showLogin);
  tabSignup.addEventListener('click', showSignup);
  btnSignup.addEventListener('click', showSignup);

  // ✅ Signup function (connects to backend)
  document.getElementById('signup-submit').addEventListener('click', async () => {
    const name = document.getElementById('name').value.trim();
    const username = document.getElementById('username').value.trim();
    const age = document.getElementById('age').value.trim();
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value;

    if (!name || !username || !age || !email || !password) {
      alert('Please fill all fields.');
      return;
    }

    try {
      const res = await fetch('http://localhost:3000/signup', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, username, age, email, password })
      });
      const result = await res.json();
      alert(result.message);

      if (res.ok) {
        showLogin();
      }
    } catch (err) {
      console.error(err);
      alert('Server error. Please try again.');
    }
  });

 
  //  Login function (connects to backend)
  document.getElementById('login-submit').addEventListener('click', async () => {
    const username = document.getElementById('login-username').value.trim();
    const password = document.getElementById('login-pass').value;

    if (!username || !password) {
      alert('Please enter both username and password.');
      return;
    }

    try {
      const res = await fetch('http://localhost:3000/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password })
      });

      // parse response once
      const result = await res.json();

      if (!res.ok) {
        alert(result.message || 'Login failed.');
        return;
      }

      // success: store a single consistent key and redirect
      const user = result.username || username;
      localStorage.setItem('mr_current', user);
      // optional: keep backward compatibility key
      localStorage.setItem('loggedInUser', user);

      alert(result.message || 'Signed in successfully.');
      window.location.href = 'recommendations.html';
    } catch (err) {
      console.error(err);
      alert('Server error. Please try again.');
    }
  });

  document.getElementById('clear-signup').addEventListener('click', ()=>{
    ['name','age','email','username','password'].forEach(id=>document.getElementById(id).value='');
  });

  document.getElementById('help-btn').addEventListener('click', ()=>{
    alert('Need help? You can sign up or log in to start using the recommender.');
  });
</script>

  </body>
  </html>